(function(t){function e(e){for(var a,i,o=e[0],c=e[1],l=e[2],u=0,m=[];u<o.length;u++)i=o[u],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&m.push(r[i][0]),r[i]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(t[a]=c[a]);d&&d(e);while(m.length)m.shift()();return n.push.apply(n,l||[]),s()}function s(){for(var t,e=0;e<n.length;e++){for(var s=n[e],a=!0,o=1;o<s.length;o++){var c=s[o];0!==r[c]&&(a=!1)}a&&(n.splice(e--,1),t=i(i.s=s[0]))}return t}var a={},r={app:0},n=[];function i(e){if(a[e])return a[e].exports;var s=a[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,i),s.l=!0,s.exports}i.m=t,i.c=a,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)i.d(s,a,function(e){return t[e]}.bind(null,a));return s},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var l=0;l<o.length;l++)e(o[l]);var d=c;n.push([0,"chunk-vendors"]),s()})({0:function(t,e,s){t.exports=s("56d7")},2406:function(t,e,s){},"30ea":function(t,e,s){},"3b10":function(t,e,s){},"4b33":function(t,e,s){},"56d7":function(t,e,s){"use strict";s.r(e);s("e623"),s("e379"),s("5dc8"),s("37e1");var a=s("2b0e"),r=s("1dce"),n=s.n(r),i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"app"}},[s("mainMenu"),s("div",{staticClass:"page-header header-filter",staticStyle:{"background-size":"cover","background-position":"top center"},attrs:{id:"backgroundDiv"}},[s("div",{staticClass:"container wow fadeIn",staticStyle:{display:"flex","align-items":"center","flex-direction":"column"},attrs:{"data-wow-duration":"2s"}},[s("mainCard")],1)]),s("modalWindow")],1)},o=[],c=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"modal",attrs:{id:"modalWindow",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"false"}},[s("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[s("div",{staticClass:"modal-content"},[t._m(0),s("div",{staticClass:"modal-body"},[t._v(t._s(t.messageText))]),t._m(1)])])])},l=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"modal-header"},[s("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLabel"}},[t._v("Сообщение")]),s("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[s("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"modal-footer"},[s("button",{staticClass:"btn btn-secondary btn-sm",attrs:{type:"button","data-dismiss":"modal"}},[t._v("Закрыть")])])}],d={name:"modalWindow",data:function(){return{messageText:"test"}},created:function(){var t=this;it.$on("showMessage",(function(e){t.messageText=e,$("#modalWindow").modal("show")}))}},u=d,m=s("2877"),f=Object(m["a"])(u,c,l,!1,null,null,null),p=f.exports,v=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("nav",{staticClass:"navbar navbar-transparent navbar-color-on-scroll fixed-top navbar-expand-lg",attrs:{"color-on-scroll":"100",id:"sectionsNav"}},[s("div",{staticClass:"container"},[t._m(0),s("div",{staticClass:"collapse navbar-collapse"},[s("ul",{staticClass:"navbar-nav ml-auto"},[this.$store.state.currentUser?s("li",{staticClass:"dropdown nav-item"},[s("a",{staticClass:"dropdown-toggle nav-link",attrs:{"aria-expanded":"false",href:"#","data-toggle":"dropdown"}},[s("i",{staticClass:"material-icons"},[t._v("face")]),t._v(" "+t._s(this.$store.getters.currentUserName)+" "),s("div",{staticClass:"ripple-container"})]),t._m(1)]):t._e()])])])])},b=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"navbar-translate",staticStyle:{position:"relative"}},[s("a",{staticClass:"navbar-brand",attrs:{href:"#"}},[s("h4",{staticClass:"card-title",staticStyle:{color:"white"}},[t._v("Trello Up")])]),s("button",{staticClass:"navbar-toggler",attrs:{type:"button","data-toggle":"collapse","aria-expanded":"false","aria-label":"Toggle navigation"}},[s("span",{staticClass:"sr-only"},[t._v("Toggle navigation")]),s("span",{staticClass:"navbar-toggler-icon"}),s("span",{staticClass:"navbar-toggler-icon"}),s("span",{staticClass:"navbar-toggler-icon"})])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"dropdown-menu dropdown-with-icons"},[s("a",{staticClass:"dropdown-item",attrs:{href:"./"}},[s("i",{staticClass:"material-icons"},[t._v("meeting_room")]),t._v(" Выход ")])])}],h={name:"mainMenu",data:function(){return{}},methods:{},created:function(){},beforeMount:function(){}},g=h,_=Object(m["a"])(g,v,b,!1,null,null,null),C=_.exports,y=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"card mainCard"},[s("div",{staticClass:"card-body",staticStyle:{"padding-bottom":"0px","margin-bottom":"-15px"}},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-md-6",staticStyle:{"padding-left":"30px","padding-right":"30px","padding-bottom":"40px"}},[s("router-view")],1),s("div",{staticClass:"col-md-6 rightCard"},[this.$store.state.currentUser?t.cardsCount?t.cardsCount?s("h4",{staticClass:"title",staticStyle:{color:"#3c4858"}},[t._v(" Ваши текущие задачи ")]):t._e():s("div",{staticClass:"info"},[t._m(2),s("h4",{staticClass:"info-title"},[t._v("Ваши задачи")]),s("p",[t._v(" Задачи, созданные вами, будут отображаться тут. Создайте первую задачу в левой колонке. ")])]):s("div",{staticClass:"info"},[t._m(0),s("h4",{staticClass:"info-title"},[t._v("Привет!")]),t._m(1)]),t._l(t.cards,(function(e,a){return s("div",{key:e,staticClass:"card wow fadeInUp",staticStyle:{width:"100%"},attrs:{"data-wow-duration":"2s"}},[s("div",{staticClass:"stageLine",class:t.stageColor(a)}),s("div",{staticClass:"card-body"},[s("h4",{staticClass:"card-title"},[t._v(t._s(e.name))]),s("h6",{staticClass:"card-subtitle mb-2 text-muted"},[t._v(t._s(t.stage(a)))]),s("p",{staticClass:"card-text"},[t._v(t._s(e.desc))]),s("div",{attrs:{align:"right"}},t._l(e.idMembers,(function(e){return s("div",{key:e,staticStyle:{display:"block",float:"right",margin:"2px"}},[s("a",{attrs:{href:"#","data-toggle":"tooltip",title:t.getmemberTooltip(e)}},[s("img",{staticClass:"img-raised rounded-circle img-fluid",attrs:{src:t.getAvatarURL(e),width:"30px"}})])])})),0)])])}))],2)])])])},k=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"icon icon-primary"},[s("i",{staticClass:"material-icons"},[t._v("chat")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("p",[t._v(" Тут вы можете создать задачу по вашей проблеме, наблюдать за ходом ее исполнения. "),s("br"),s("br"),t._v("Для начала работы необходимо авторизоваться. Если вас нет в списке пользователей, зарегистрируйтесь или обратитесь к администратору по телефону. ")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"icon icon-primary"},[s("i",{staticClass:"material-icons"},[t._v("chat")])])}],x=(s("4160"),s("b0c0"),s("159b"),s("bc3a")),w=s.n(x),U="2a754a93fa902b29d2694a2f71af3f83",E="b5123e80de5b5de7d21f46a754d8f97e6013facb5d0d6b5d2fcc2484b5530519",M="fsA5vKgk",S={name:"mainCard",data:function(){return{users:[]}},methods:{getmemberTooltip:function(t){var e;return this.members.forEach((function(s){t==s.id&&(e=s.fullName)})),e},getAvatarURL:function(t){var e;return this.members.forEach((function(s){t==s.id&&(e=s.avatarUrl?s.avatarUrl+"/30.png":"img/placeholder.jpg")})),e},showCustomField:function(t){return!!t&&t.idValue==this.selectedUser},stageColor:function(t){if(1==this.cards[t].closed)return"stageArchiv";for(var e=0;e<this.lists.length;++e)if(this.lists[e].id==this.cards[t].idList)return"stage"+e},stage:function(t){if(1==this.cards[t].closed)return"В архиве";for(var e=0;e<this.lists.length;++e)if(this.lists[e].id==this.cards[t].idList)return this.lists[e].name}},computed:{cards:function(){return this.$store.state.cards},lists:function(){return this.$store.state.lists},members:function(){return this.$store.state.members},cardsCount:function(){return this.$store.state.cards.length}},mounted:function(){var t=this;w.a.get("https://api.trello.com/1/boards/"+M+"/customFields?key="+U+"&token="+E).then((function(e){t.users=e.data[0].options,t.$nextTick((function(){$("#selectedUser").selectpicker("refresh")}))})),document.getElementById("backgroundDiv").style.backgroundImage="url('img/backgrounds/patrick-tomasso-1272187-unsplash.jpg')"}},j=S,O=(s("58fd"),Object(m["a"])(j,y,k,!1,null,"5be7480e",null)),T=O.exports,F={name:"app",components:{modalWindow:p,mainMenu:C,mainCard:T}},L=F,I=(s("cf25"),Object(m["a"])(L,i,o,!1,null,null,null)),P=I.exports,A=(s("3b10"),s("4b33"),s("8c4f")),N=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"login"},[s("center",[s("div",{staticClass:"info"},[s("div",{staticClass:"icon icon-primary"},[s("i",{staticClass:"material-icons"},[t._v("account_circle")])]),s("h4",{staticClass:"info-title"},[t._v("Авторизация")])]),s("div",{staticClass:"form-group",class:{"has-danger":t.$v.selectedUser.$error}},[s("label",{attrs:{for:"exampleFormControlSelect2"}},[t._v("Пользователь")]),s("select",{directives:[{name:"model",rawName:"v-model",value:t.selectedUser,expression:"selectedUser"}],staticClass:"form-control selectpicker show-tick",attrs:{"data-live-search":"true",id:"selectedUser","data-style":"btn btn-link",disabled:0==t.users.length},on:{blur:t.$v.selectedUser.$touch,change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.selectedUser=e.target.multiple?s:s[0]}}},[s("option",{attrs:{"data-hidden":"true"}}),t._l(t.users,(function(e){return s("option",{key:e,domProps:{value:e.id}},[t._v(t._s(e.value.text))])}))],2),t.$v.selectedUser.required?t._e():s("small",{staticClass:"form-text text-muted",attrs:{id:"emailHelp"}},[t._v("Обязательное поле")])]),s("button",{staticClass:"btn btn-primary btn-round",attrs:{disabled:t.$v.$invalid},on:{click:t.login}},[t._v(" Вход ")]),s("br"),s("button",{staticClass:"btn btn-secondary btn-round",attrs:{type:"button",disabled:""}},[t._v(" Регистрация ")])])],1)},q=[],W=s("b5ae"),K={name:"login",data:function(){return{selectedUser:""}},validations:{selectedUser:{required:W["required"]}},computed:{users:function(){return this.$store.state.users}},methods:{login:function(){this.$store.commit("setCurrentUser",this.selectedUser),this.$store.dispatch("getLists"),this.$store.dispatch("getMembers"),this.$store.dispatch("getCards",this.selectedUser),this.$router.push("/tasks")}},beforeMount:function(){this.$store.dispatch("getUsers")},mounted:function(){this.$nextTick((function(){$("#selectedUser").selectpicker("refresh")}))}},D=K,H=(s("9b2a"),Object(m["a"])(D,N,q,!1,null,null,null)),V=H.exports,J=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("center",[s("h2",{staticClass:"title",staticStyle:{color:"#3c4858"}},[t._v("Новая задача")])]),s("form",{on:{submit:function(e){return e.preventDefault(),t.sendTicket(e)}}},[s("div",{staticClass:"form-group",class:{"has-danger":t.$v.name.$error}},[s("label",[t._v("Задача")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],staticClass:"form-control",attrs:{type:"text",id:"name"},domProps:{value:t.name},on:{input:[function(e){e.target.composing||(t.name=e.target.value)},t.$v.name.$touch]}}),t.$v.name.required?t._e():s("small",{staticClass:"form-text text-muted",attrs:{id:"emailHelp"}},[t._v("Обязательное поле")])]),s("div",{staticClass:"form-group"},[s("label",[t._v("Описание задачи")]),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.desc,expression:"desc"}],staticClass:"form-control",attrs:{rows:"4",placeholder:""},domProps:{value:t.desc},on:{input:function(e){e.target.composing||(t.desc=e.target.value)}}}),s("small",{staticClass:"form-text text-muted",attrs:{id:"emailHelp"}},[t._v("Максимально подробно опишите вашу заявку. Заявка должна содержать идентификационные номера, модели устройств или сущностей, текст возникшей ошибки. В случае возникновения проблемы опишите последовательность выполнения действий.")])]),s("center",[s("button",{staticClass:"btn btn-primary btn-round",attrs:{type:"submit",disabled:t.$v.$invalid}},[t._v(" Подать заявку ")]),s("button",{staticClass:"btn btn-primary btn-link",attrs:{type:"button"},on:{click:t.crearForm}},[t._v(" Очистить ")])])],1)],1)},R=[],z="2a754a93fa902b29d2694a2f71af3f83",B="b5123e80de5b5de7d21f46a754d8f97e6013facb5d0d6b5d2fcc2484b5530519",G="fsA5vKgk",Q={name:"mainCard",data:function(){return{name:"",desc:"",selectedUser:""}},validations:{name:{required:W["required"]}},mounted:function(){this.$store.state.currentUser||this.$router.push("/")},methods:{crearForm:function(){this.name="",this.desc=""},sendTicket:function(){var t=this;w.a.get("https://api.trello.com/1/boards/"+G+"/lists?cards=open&card_fields=all&filter=open&fields=all&key="+z+"&token="+B).then((function(e){w.a.post("https://api.trello.com/1/cards?name="+t.name+"&desc="+t.desc+"&idList="+e.data[0].id+"&keepFromSource=all&pos=top&key="+z+"&token="+B).then((function(e){w.a.put("https://api.trello.com/1/card/"+e.data.id+"/customField/"+t.$store.state.costomFieldsId+"/item?idValue="+t.$store.state.currentUser+"&key="+z+"&token="+B).then((function(){t.$store.dispatch("getCards",t.$store.state.currentUser)})),it.$emit("showMessage","Задача добавлена! В ближайшее время она будет распределена на специалиста. Ожидайте."),t.$store.dispatch("getCards",t.$store.state.currentUser),t.name="",t.desc=""}))}))}}},X=Q,Y=Object(m["a"])(X,J,R,!1,null,null,null),Z=Y.exports;a["a"].use(A["a"]);var tt=new A["a"]({routes:[{path:"/",component:V},{path:"*",redirect:"/"},{path:"/tasks",component:Z}],mode:"history"}),et=(s("4de4"),s("2f62"));a["a"].use(et["a"]);var st="2a754a93fa902b29d2694a2f71af3f83",at="b5123e80de5b5de7d21f46a754d8f97e6013facb5d0d6b5d2fcc2484b5530519",rt="fsA5vKgk",nt=new et["a"].Store({state:{users:{},lists:{},members:{},cards:{},currentUser:"",costomFieldsId:""},getters:{currentUserName:function(t){var e;return t.users.forEach((function(s){t.currentUser==s.id&&(e=s.value.text)})),e}},mutations:{setUsers:function(t,e){t.users=e.options,t.costomFieldsId=e.id,this.$nextTick((function(){$("#selectedUser").selectpicker("refresh")}))},setCurrentUser:function(t,e){t.currentUser=e},setLists:function(t,e){t.lists=e},setMembers:function(t,e){t.members=e},setCards:function(t,e){t.cards=e}},actions:{getUsers:function(t){w.a.get("https://api.trello.com/1/boards/"+rt+"/customFields?key="+st+"&token="+at).then((function(e){t.commit("setUsers",e.data[0])}))},getLists:function(t){w.a.get("https://api.trello.com/1/boards/"+rt+"/?lists=all&key="+st+"&token="+at).then((function(e){t.commit("setLists",e.data.lists)}))},getMembers:function(t){w.a.get("https://api.trello.com/1/boards/"+rt+"/?members=all&key="+st+"&token="+at).then((function(e){t.commit("setMembers",e.data.members)}))},getCards:function(t,e){w.a.get("https://api.trello.com/1/boards/fsA5vKgk/?cards=open&fields=all&card_customFieldItems=true&key="+st+"&token="+at).then((function(s){var a=s.data.cards.filter((function(t){if(t.customFieldItems.length>0)return t.customFieldItems[0].idValue==e}));t.commit("setCards",a)}))}}});s.d(e,"eventEmitter",(function(){return it})),a["a"].use(A["a"]),a["a"].use(n.a),a["a"].config.productionTip=!1;var it=new a["a"];new a["a"]({router:tt,store:nt,render:function(t){return t(P)}}).$mount("#app")},"58fd":function(t,e,s){"use strict";var a=s("30ea"),r=s.n(a);r.a},"9b2a":function(t,e,s){"use strict";var a=s("2406"),r=s.n(a);r.a},cf25:function(t,e,s){"use strict";var a=s("fea6"),r=s.n(a);r.a},fea6:function(t,e,s){}});
//# sourceMappingURL=app.fd29ef66.js.map